# ===================================================================
# LOCAL ENVIRONMENT CONFIGURATION
# ===================================================================

# --- Local PostgreSQL Database ---
spring.datasource.url=jdbc:postgresql://3.110.102.128:5432/production_db
spring.datasource.username=app_user
spring.datasource.password=AppPassword123
spring.datasource.driver-class-name=org.postgresql.Driver

# ==============================================================
# HIKARI CONNECTION POOL (LOCAL TUNING)
# ==============================================================
# Aggressive recycling of connections to prevent "Connection Reset" errors
spring.datasource.hikari.max-lifetime=120000
spring.datasource.hikari.idle-timeout=60000
spring.datasource.hikari.keepalive-time=30000
spring.datasource.hikari.connection-timeout=30000
# Ensure we have enough connections for parallel dashboard fetching
spring.datasource.hikari.maximum-pool-size=15

# ==============================================================
# JPA / HIBERNATE
# ==============================================================
# CRITICAL: Set to 'none' or 'validate' for Multi-Tenant apps to prevent 
# schema update locks when switching tenants rapidly.
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# --- Logging ---
logging.level.org.springframework=INFO
logging.level.com.xammer.cloud=DEBUG
# Enable Hikari logging to see connection pool status if errors persist
logging.level.com.zaxxer.hikari=INFO

# --- Frontend / CORS ---
cors.allowed-origins=http://localhost:8080,http://127.0.0.1:5500,http://localhost:5173
app.frontend.url=http://localhost:5173

# --- Redis ---
spring.redis.host=localhost

# --- API Keys ---
gemini.api.key=${GEMINI_API_KEY:AIzaSyDUHXg5yf3PrWdtvrHOhHQ9t5QKihoeCVA}
openai.api.key=${OPENAI_API_KEY}
groq.api.key=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

# --- CloudFormation Template ---
cloudformation.template.s3.url=https://xamopscftemplate.s3.ap-south-1.amazonaws.com/xamops-readonly-role.local.yml

# --- Thymeleaf ---
spring.thymeleaf.prefix=file:frontend-app/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.cache=false

# --- Services Configuration ---
# Prophet Forecast Service
forecast.service.url=http://localhost:5002
forecast.service.connect-timeout=10000
forecast.service.read-timeout=180000

# RestTemplate Configuration
rest.template.connect-timeout=10000
rest.template.read-timeout=180000

# GitHub API
github.api.baseurl=https://api.github.com

# Encryption
app.encryption.secret-key=gvoQaAQFvucYlgc4GQLCFvq0df22kqY36bhfnZc/0Y4=

# --- Re-confirming External Tools for Local Dev ---
prowler.executable.path=C:\\Users\\Akshay\\AppData\\Roaming\\Python\\Python313\\Scripts\\prowler.exe